{% extends "base.html" %}
{% load widget_tweaks %}
{% block content %}
<h2 style="margin-bottom:20px; color:#333;">Ваши группы</h2>

<a href="{% url 'create_group' %}"
    style="display:inline-block; padding:10px 16px; background:#28a745; color:white; border-radius:6px; text-decoration:none; font-weight:bold; margin-bottom:15px;">
    Создать группу
</a>

<table style="width:100%; border-collapse:collapse; box-shadow:0 2px 6px rgba(0,0,0,0.1);">
    <thead>
        <tr style="background:#007BFF; color:white; text-align:left;">
            <th style="padding:12px;">Название группы</th>
            <th style="padding:12px;">Заметки</th>
            <th style="padding:12px;">Презентации</th>
            <th style="padding:12px;">Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for group in groups %}
        <tr style="border-bottom:1px solid #ddd; transition:background 0.3s;"
            onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='white'">
            <td style="padding:10px; font-weight:500;">{{ group.name }}</td>
            <td style="padding:10px;">{{ group.notes|default:'-' }}</td>
            <td style="padding:10px;">
                {% for pres in group.presentations.all %}
                <div style="margin-bottom:5px;">
                    <a href="{{ pres.file.url }}" target="_blank"
                        style="color:#007BFF; text-decoration:none; font-weight:500;">{{ pres.filename }}</a>
                    <form method="post" action="{% url 'delete_presentation' pres.pk %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit"
                            style="background:red;color:white;border:none;border-radius:4px;padding:2px 5px;cursor:pointer; margin-left:5px;">✖</button>
                    </form>
                </div>
                {% empty %}
                <span style="color:#888;">Нет презентаций</span>
                {% endfor %}
                <a href="{% url 'upload_presentations' group.pk %}"
                    style="color:#28a745; font-weight:bold; text-decoration:none;">+ Загрузить</a>
            </td>
            <td style="padding:10px;">
                <a href="{% url 'edit_group' group.pk %}"
                    style="padding:5px 10px; background:#ffc107; color:white; border-radius:4px; text-decoration:none; margin-right:5px;">✎
                    Редактировать</a>
                <form method="post" action="{% url 'delete_group' group.pk %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit"
                        style="padding:5px 10px; background:red; color:white; border:none; border-radius:4px; cursor:pointer;">✖
                        Удалить</button>
                </form>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" style="padding:15px; text-align:center; color:#888;">У вас пока нет групп</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}